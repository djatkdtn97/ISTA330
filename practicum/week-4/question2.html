<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>

<body>
    <div id="question">
        1. Display the flowers as per question 1.<br />
        2. Add the following functionality to the page:<br />
        When users click on an image, the images should be
        reorganized using the following rule:<br />
        The flower that has been clicked goes to the first position in
        the first row. The next position in the first row will
        be the flower whose name is alphabeticlly right after the
        name of the first one and so on for the other flowers.
        <br />
        So, for example if a user clicks on the flower lily,
        then the flowers should be rearranged as:
        <br />
        <table>
            <tr>
                <td>
                    lily
                </td>
                <td>
                    rose
                </td>
                <td>
                    sunflower
                </td>
                <td>
                    tulip
                </td>
            </tr>
            <tr>
                <td>
                    water lily
                </td>
                <td>
                    cherry blossom
                </td>
                <td>
                    daffodil
                </td>
                <td>
                    daisy
                </td>
            </tr>
        </table>

    </div>
    <div id='flowersDiv'>

    </div>
    <script>
        class Flower {
            constructor(name, pictureName) {
                this.name = name;
                this.picture = pictureName;
            }
        }
        let daffodil = new Flower('Daffodil', 'https://habahram.blob.core.windows.net/flowers/daffodil.jpg');
        let cherryblossom = new Flower('Cherry blossom', 'https://habahram.blob.core.windows.net/flowers/cherryblossom.jpg');
        let lily = new Flower('Lily', 'https://habahram.blob.core.windows.net/flowers/lily.jpg');
        let daisy = new Flower('Daisy', 'https://habahram.blob.core.windows.net/flowers/daisy.jpg');
        let sunflower = new Flower('Sunflower', 'https://habahram.blob.core.windows.net/flowers/sunflower.jpg');
        let tulip = new Flower('Tulip', 'https://habahram.blob.core.windows.net/flowers/tulip.jpg');
        let rose = new Flower('Rose', 'https://habahram.blob.core.windows.net/flowers/rose.jpg');
        let waterlily = new Flower('Water lily', 'https://habahram.blob.core.windows.net/flowers/waterlily.jpg');
        
        let flowers = [
              daffodil,
              cherryblossom,
              lily,
              daisy,
              sunflower,
              tulip,
              rose,
              waterlily
        ];
        // Function to compare two flower objects, will be later used in sorting the arrays
         function compare( a, b ) {
             // By name sorting
             if ( a.name < b.name ){
                 return -1;
             }
             if ( a.name > b.name ){
                 return 1;
             }
             return 0;
         }
         // getting all images tds
         let images = document.getElementById("flowersDiv").getElementsByTagName("td");
         // Populating the images are per array (in order)
         function populate(array) {
             flowersDiv = document.getElementById("flowersDiv")
             table = ""
             table += "<table>";
             for(i=0; i<flowers.length; i++) {
                 if(i%4 === 0 ) {
                         table += "\n<tr>";
                 }
                 table += "\n<td id=" +  i + "><img src='" + array[i].picture + "'><br>"+ array[i].name + "</td>";  
                 if(i%4 === 3) {
                     table += "</tr>";
                 }
             }
             table += "\n</table>";
             flowersDiv.innerHTML = table;
             // Setting click event of the arrays
             setEvent();
         }
         // Setting event for each td
         function setEvent() {
             for(let image of images) {
                 image.addEventListener("click", function() {
                     // getting the index of clicked image in current flowers array
                     index = this.getAttribute("id")
                     // Get the FLower object out of that array or Getting the clicked Flower array
                     item = flowers[index];
                     // Sort the whole flowers array
                     flowers = flowers.sort(compare);
                     // Now get the new index of the clicked object
                     index = flowers.indexOf(item);
                     // Split the array by that index
                     var p1 = flowers.slice(0,index).sort(compare);
                     var p2 = flowers.slice(index).sort(compare);
                     // Then recreate the flowers array starting from clicked element in order by concatenating two parts
                     flowers = p2.concat(p1);
                     // Populate the DOM with new flowers array
                     populate(flowers)
                 });
             }
         }
         // Populating the DOM with initial flowers array
         populate(flowers)
     </script>
</body>

</html>